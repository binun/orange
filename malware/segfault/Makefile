CC := gcc
MODULE_NAME := segfault
KDIR  := /lib/modules/$(shell uname -r)/build
PWD   := $(shell pwd)
CFILES := segf.c
OBJS := $(CFILES:%.c=%.o)

obj-m := $(MODULE_NAME).o
$(MODULE_NAME)-objs := $(OBJS)
ccflags-y := -g
ccflags-y += -Wall

default:
	$(MAKE) -C $(KDIR) M=$(PWD) modules

clean:
	rm -rf *.o *.ko *.cmd *.c~ *.mod.c Module.symvers modules.order
